<!DOCTYPE html>
<html>
  <head>
    <title>Signup | Xmas Wishlist</title>
    <link rel="stylesheet" href="wishlist.css">
    <meta charset="utf-8">
    <meta name="author" content="Paridhi and Andrew">
    <meta name="description" content="This program uses HTTP to login, logout, and create a user base">
    <script src="wishlist.js"></script>
  </head>

  <body>
    <main>
        <h1>Xmas Wishlist <span id="year">2019</span></h1>
        <hr>
        <h2>Signup</h2>

        <form id="signupForm">
          <input type="text" placeholder="Username" name="username" id= "username" required>
          <br>
          <input type="password" placeholder="Password" name="password" id="password" required>
          <br>
          <input type="email" placeholder="Email Address" name="emailaddress" id= "email" required>
          <br>
          <button class="btn" type="submit">Signup</button>
        </form>

        <p>Already have an account? <a href="login.html">Login</a></p>
    </main>

    <script>
      window.addEventListener("load", function(){

        document.getElementById('signupForm').addEventListener("submit", function(event){
          event.preventDefault()
          handleSubmit()
        } )

        handleSubmit =() => {
          console.log("submit clicked")
          let xhr= new XMLHttpRequest()

          xhr.open('POST', 'â€‹http://fa19server.appspot.com/api/Users', true)
          xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8')
          xhr.onreadystatechange=()=>{
            if(xhr.readyState==4 && xhr.status==200){
              console.log("GOOD")
            }else{
              console.log("IDK")
            }
          }

          let name= document.getElementById('username').value;
          console.log(name);

          let email= document.getElementById('email').value;
          console.log(email);

          let password= document.getElementById('password').value;
          console.log(password);

          let payload= `username=${name}&email=${email}&password=${password}`

          let pay= "username=paridhi&email=pari@gmail.com&password=hello"
          xhr.send(pay)
        }

        function handleResponse(xhr){
          if(xhr.readyState==4 && xhr.status==200){
            console.log("Good")
          }
          else{
            console.log("LOSER")
          }
        }

      })
    </script>
  </body>
</html>